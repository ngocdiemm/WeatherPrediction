<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Meteorological Data</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .chart-container {
            margin: auto;
        }
    </style>
</head>
<body>
    <h1>My Meteorological Data</h1>
    
    <div class="chart-container" id="temperatureChart"></div>
    <div class="chart-container" id="windChart"></div>
    <div class="chart-container" id="visibilityChart"></div>
    <div class="chart-container" id="cloudChart"></div>
    <div class="chart-container" id="humidityChart"></div>
    <div class="chart-container" id="pressureChart"></div>
    <div class="chart-container" id="rainChart"></div>

    <script>
        $(document).ready(function () {
            // Function to update weather data on the page
            function updateWeatherData(data) {
                // Iterate through each feature and update the HTML
                $(".feature p strong").each(function () {
                    var featureName = $(this).text().replace(":", "").trim();
                    var featureValue = data[featureName.toLowerCase()];

                    // Update the text content of the corresponding <span> element
                    $(this).parent().siblings("span").text(": " + featureValue);
                });
            }

            // Dummy data for testing
            var dummyData = {
                timestamps: [1, 2, 3, 4, 5],
                temperatures: [20, 22, 25, 18, 23],
                wind: [10, 12, 15, 8, 13],
                visibility: [1000, 800, 1200, 900, 1100],
                cloud: [50, 60, 40, 70, 55],
                humidity: [75, 80, 70, 85, 78],
                pressure: [1015, 1010, 1020, 1005, 1018],
                rain: [0, 0, 5, 2, 0]
            };

            // Update weather data on the page
            updateWeatherData(dummyData);

            // Extract data for each feature
            var timestamps = dummyData.timestamps;
            var temperatures = dummyData.temperatures;
            var wind = dummyData.wind;
            var visibility = dummyData.visibility;
            var cloud = dummyData.cloud;
            var humidity = dummyData.humidity;
            var pressure = dummyData.pressure;
            var rain = dummyData.rain;

            // Create a combined line chart for temperature, wind, visibility, and cloud
            createCombinedLineChart('temperatureChart', 'Meteorological Data', timestamps, temperatures, wind, visibility, cloud);

            // Create a combined bar chart for humidity, pressure, and rain
            createCombinedBarChart('humidityChart', 'Meteorological Data', timestamps, humidity, pressure, rain);
        });

        // Function to create a Highcharts line chart
        function createCombinedLineChart(containerId, title, categories, temperatures, wind, visibility, cloud) {
            Highcharts.chart(containerId, {
                chart: {
                    type: 'line',
                    width: $(window).width() * 2 / 3 // Set the chart width to two-thirds of the screen width
                },
                title: {
                    text: title + ' Line Chart'
                },
                xAxis: {
                    categories: categories
                },
                yAxis: {
                    title: {
                        text: 'Values'
                    }
                },
                series: [{
                    name: 'Temperature',
                    data: temperatures
                }, {
                    name: 'Wind',
                    data: wind
                }, {
                    name: 'Visibility',
                    data: visibility
                }, {
                    name: 'Cloud',
                    data: cloud
                }]
            });
        }

        // Function to create a Highcharts combined bar chart
        function createCombinedBarChart(containerId, title, categories, humidity, pressure, rain) {
            Highcharts.chart(containerId, {
                chart: {
                    type: 'bar',
                    width: $(window).width() * 2 / 3 // Set the chart width to two-thirds of the screen width
                },
                title: {
                    text: title + ' Bar Chart'
                },
                xAxis: {
                    categories: categories
                },
                yAxis: {
                    title: {
                        text: 'Values'
                    }
                },
                series: [{
                    name: 'Humidity',
                    data: humidity
                }, {
                    name: 'Pressure',
                    data: pressure
                }, {
                    name: 'Rain',
                    data: rain
                }]
            });
        }

        // Update chart position when the window is resized
        $(window).resize(function () {
            createCombinedLineChart('temperatureChart', 'Meteorological Data', timestamps, temperatures, wind, visibility, cloud);
            createCombinedBarChart('humidityChart', 'Meteorological Data', timestamps, humidity, pressure, rain);
        });
    </script>
</body>
</html>
